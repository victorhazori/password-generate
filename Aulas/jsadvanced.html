<html>
  <head>
    <meta charset="UTF-8" />
    <style>
        .highlight {
            color: green;
        }
    </style>
    <title>Curriculum</title>
  </head>
  <body>
    <img src="minhafoto.jpeg" width="100" />
    <h1 id="person-name" class="text">Victor Magalhães</h1>
    <h2>Programador JavaScript</h2>
    <p class="text">
      Conhecimento em programação Frontend, Backend para desenvolvimento de
      sistemas Fullstack.
    </p>
    <p>
      Para mais detalhes, por favor, visite meu
      <a href="https://github.com/victorhazori">Github</a> ou 
      <a href="https://inhousetech.com.br">Portfólio</a>.
    </p>
    <p>
        <button>LinkedIn</button>
        <a href="https://linkedin.com/in/vslmagalhaes">Link para o LinkedIn</a>
    </p>
    <p>
        <input type="text" />
    </p>
    <p>
        <form action="https://google.com/search" method="get">
            <label for="q">Buscar no Google</label>
            <input type="text" name="q" />
            <input type="submit" value="Pesquisar" />
        </form>
    </p>
    <p>
        <button id="alter-color">Alterar cor</button>
        <button id="alter-class">Alterar classe</button>
    </p>
    <p>
        <button id="exec-button">Executar</button>
    </p>
    <p>
        <button id="recuve-button">Recuperar Dados</button>
        <br />
        <br />
    </p>
    <script>
        // Victor Magalhães
        // Hierarquia do DOM
        // Document --> Nodes --> Elements --> Attributes

        //   console.log(document) // certo
        //   console.log(document.body) // certo
        //   console.log(document.body.h1) // errado

        // Acessando os nós do DOM

        // Forma "antiga" ..
        // document.getElementById()
        // document.getElementsByTagName()
        // document.getElementsByClassName()

        // Forma moderna ..
        // document.querySelector('selector') // Retorna a PRIMEIRA ocorrencia do elemento que você buscou
        // document.querySelectorAll('selector') // Retorna TODAS as ocorrencias do elemento que você buscou
        // element.querySelector('selector')
        // element.querySelectorAll('selector')

        // CSS Selector

        // Universal: *
        // Id: #el-id
        // Tag: <el>
        // Class: .el-class
        // Atributos: [attr=value]
        // Grupos (vírgula): el,el
        // Descendentes (espaço): el el
        // Childs (>): el > el

        // console.log("*", document.querySelectorAll("*"))
        // console.log("id", document.querySelector("#person-name"))
        // console.log("tag", document.querySelectorAll("p"))
        // console.log("class", document.querySelectorAll(".text"))
        // console.log("attr", document.querySelectorAll("a[href]"))
        // console.log(
        //     "attr",
        //     document.querySelectorAll("a[href='https://inhousetech.com.br']")
        // )
        
        // // Iterando toda a árvore DOM ...
        // for (const el of document.querySelectorAll("*")) {
        //     console.log("el", el)
        // }
        // https://try.jsoup.org/
        
        // Alterando um objeto do DOM

        // const titleEl = document.querySelector("#person-name")
        // console.log(titleEl)
        // console.log("titleEl value:", titleEl.innerHTML)
        // titleEl.innerHTML = "Victor Soares Lage de Magalhães"
        // titleEl.style.color = "blue"
        // console.log(titleEl)
        
        // Criando elementos dinamicamente no DOM
        
        // const subTitleEl = document.createElement("h2")
        // subTitleEl.innerHTML = "Projetos"

        // const pjListEL = document.createElement("ul")

        // const pjListItem1El = document.createElement("li")
        // pjListItem1El.innerHTML =  "TODO MVC"

        // const pjListItem2El = document.createElement("li")
        // pjListItem2El.innerHTML =  "Github API"

        // const pjListItem3El = document.createElement("li")
        // pjListItem3El.innerHTML =  "eCommerce"
        
        // pjListEL.append(pjListItem1El)
        // pjListEL.append(pjListItem2El)
        // pjListEL.append(pjListItem3El)

        // document.body.append(subTitleEl)
        // document.body.append(pjListEL)

        // Eventos do DOM
        // https://developer.mozilla.org/en-US/docs/Web/Events

        // Evento de página recarregada - DOMContentLoaded
        // document.addEventListener("DOMContentLoaded", () => {
        //     const el1 = document.getElementById("person-name")
        //     console.log("el1", el1)
        // })

        // Evento de clique - click
        // https://developer.mozilla.org/en-US/docs/Web/API/Element/click_event
        // const button = document.querySelector("button")
        // button.addEventListener("click", () => {
        //     console.log("Clicou no botão!")
        // })
        // const hyperlink = document.querySelector("a")
        // hyperlink.addEventListener("click", (event) => {
        //     event.preventDefault()
        //     console.log("Clicou no hyperlink!")
        // })

        // Evento de tecla - keydown e keyup
        // https://developer.mozilla.org/en-US/docs/Web/API/Element/keydown_event
        // const inputEl = document.querySelector("input[type=text]")
        // inputEl.addEventListener("keydown", (event) => {
        //     console.log(`Keydown - ${event.key} - ${event.keyCode}`)
        //     if (event.keyCode === 13) {
        //         alert(`Tecla ENTER pressionada - ${inputEl.value}`)
        //         inputEl.value = ""
        //     }
        // })

        // Evento de formulário - onsubmit
        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/submit_event
        // const formEl = document.querySelector("form")
        // formEl.addEventListener("submit", (event) => {
        //     const queryValue = event.target.querySelector("input[name=q]").value

        //     if (!queryValue) {
        //         event.preventDefault()
        //         alert("O campo busca é obrigatório!")
        //     }

        //     console.log("Submit", event)
        //     console.log("Valor", queryValue)
        // })

        // Manipulando style CSS
        // https://developer.mozilla.org/en-US/docs/Web/CSS/Reference#index
        const textEl = document.querySelector("#person-name")
        const buttonEl = document.querySelector("#alter-color")
        buttonEl.addEventListener("click", () => {
            if (textEl.style.color != "blue") {
                textEl.style = "color: blue"
            } else {
                textEl.style = "color: black"
            }
        })

        // Manipulando class CSS
        // https://developer.mozilla.org/en-US/docs/Web/CSS/Reference#index
        const textClassEl = document.querySelector("#person-name")
        const buttonClassEl = document.querySelector("#alter-class")
        buttonClassEl.addEventListener("click", () => {
            textEl.style.color = ""
            textClassEl.classList.toggle("highlight")
        })
        
        // Promeses e processamento assíncrono
        // Uma Promise está em um destes estados:
        // pending (pendente): Estado inicial, que não foi realizada nem rejeitada.
        // fulfilled (realizada): Sucesso na operação
        // rejected (rejeitado): Falha na operação
        // let count = 0
        // function testPromise() {
        //     const promiseCount = ++count
        //     console.log("Sync started")

        //     new Promise((resolve, reject) => {
        //         setTimeout(() => {
        //             if (promiseCount % 2 == 0) {
        //                 resolve(promiseCount)
        //             } else {
        //                 reject(promiseCount)
        //             }
        //         }, 1000)
        //     })
        //     .then((value) => {
        //         console.log(`Promise async ok - ${value}`)
        //     })
        //     .catch((value) => {
        //         console.error(`Promise async error - ${value}`)
        //     })

        //     console.log("Sync finished")
        // }

        // const buttonExeEl = document.querySelector("#exec-button")
        // buttonExeEl.addEventListener("click", testPromise)

        // Promise.all
        // function testPromise() {
        //     console.log("Sync started")

        //     const p1 = new Promise((resolve, reject) => {
        //         setTimeout(() => {
        //             console.log("P1 finished")
        //             resolve(1)
        //         }, 1000)
        //     })

        //     const p2 = new Promise((resolve, reject) => {
        //         setTimeout(() => {
        //             console.log("P2 finished")
        //             resolve(2)
        //         }, 2000)
        //     })

        //     const p3 = new Promise((resolve, reject) => {
        //         setTimeout(() => {
        //             console.log("P3 finished")
        //             reject(3)
        //         }, 3000)
        //     })

        //     Promise.all([p1, p2, p3]).then((values) => {
        //         console.log("Promises values ok", values)
        //     }).catch((values) => {
        //         console.error("Promesis values error", values)
        //     })

        //     console.log("Sync finished")
        // }

        // const buttonExeEl = document.querySelector("#exec-button")
        // buttonExeEl.addEventListener("click", testPromise)

        // JSON
        // JavaScrip Object Notation
        // JSON.stringify(obj) // Converte para string JSON
        // JSON.parse(str) // Converte para objeto

        // Trabalhando com o JSON
        // const person = {
        //     name: "Victor Magalhães",
        //     age: 28,
        //     adress: {
        //         street: "Rua 2",
        //         number: 149,
        //         complement: "",
        //         district: "Silvio Pereira",
        //         city: "Coronel Fabriciano",
        //         state: "Minas Gerais",
        //     },
        // }

        // const personObj = JSON.stringify(person)
        // const personJSON = JSON.parse(personObj)

        // console.log(typeof person)
        // console.log("person:", person)
        // console.log(typeof personObj)
        // console.log("personString:", personObj)
        // console.log(typeof personJSON)
        // console.log("personJSON:", personJSON)
        // console.log(personObj == person) // False

        // AJAX
        // Asynchronous JavaScript And XML (AJAX)
        // Forma de realizar chamada de dados assíncronas
        // Comunicação entre navegador e servidor "sem sair da página"
        
        // Trabalhando com o AJAX
        const loadData = () => {
            const xhr = new XMLHttpRequest()

            xhr.open("GET", "https://api.github.com/users/victorhazori")
            xhr.send(null)
            xhr.onreadystatechange = () => {
                if (xhr.readyState === 4){
                    const res = JSON.parse(xhr.responseText)
                    console.log(res)

                    const name = res.name
                    const avatarUrl = res.avatar_url
                    var followers = res.followers
                    var blogUrl = res.html_url
                    
                    const avatarEl = document.createElement("img")
                    avatarEl.setAttribute("width", "128")
                    avatarEl.setAttribute("src", avatarUrl)

                    const nameEl = document.createElement("h1")
                    nameEl.innerText = name

                    const followersEl = document.createElement("p")
                    followersEl.innerText = `Followers: ${followers}`
                    
                    const blogUrlEl = document.createElement("a")
                    blogUrlEl.setAttribute("href", `${blogUrl}`)
                    blogUrlEl.innerText = blogUrl

                    document.body.appendChild(avatarEl)
                    document.body.appendChild(nameEl)
                    document.body.appendChild(followersEl)
                    document.body.appendChild(blogUrlEl)
                }
            }
        }

        const buttonRecuveEl = document.querySelector("#recuve-button")
        buttonRecuveEl.addEventListener("click", loadData)

        // End JS Advanced

    </script>
  </body>
</html>
