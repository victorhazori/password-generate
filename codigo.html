<html>
    <script>
        console.log("Olá eu estou funcionando....")

        // Comentário de uma linha

        /*
        Comentários de multiplas linhas
        */

        // Object
        console.log({
            propriedade: "valor",
            nome: "Victor",
            idade: 28,
            endereco: {
                rua: 2,
                numero: 149,
                bairro: "Silvio Pereira",
                cidade: "Coronel Fabriciano",
                estado: "Minas Gerais",
            },
        })

        // Array
        console.log([1,
            "A",
            {nome: "Victor", sobrenome: "Magalhães"},
        ])

        // Date
        // Lembrar que o mes no JS começa com o numero 0 que é Janeiro
        console.log(new Date(2022, 3, 22, 10, 20, 59))

        // Concatenação e interpolação
        var name = "Victor"
        var age = 28
        // Concatenação (antiga)
        console.log(name + " tem " + age + " anos.") // Victor tem 28 anos.
        // Interpolação (nova)
        console.log(`${name} tem ${age} anos.`)

        // Acessando dados de um Object
        const pessoas = {
            meuNome: "Victor",
            ultimoNome: "Magalhães",
            adress: {
                rua: "Sebastião Alves de Andrade",
                numero: 149,
                bairro: "Silvio Pereira",
                cidade: "Coronel Fabriciano",
                uf: "MG",
            },
        }
        console.log(`Meu nome é ${pessoas.meuNome} ${pessoas.ultimoNome} e moro em Rua ${pessoas.adress.rua}, ${pessoas.adress.numero}, ${pessoas.adress.bairro}, ${pessoas.adress.cidade} - ${pessoas.adress.uf}.`)

        // Trabalhando com Array
        // Variavel + indice (Sempre inicia do zero)
        var convidados = [
            "Victor",
            "Felipe",
            "Ana",
        ]
        console.log(convidados[0]) // Victor
        convidados[0] = "José"
        console.log(convidados[0]) // José

        // Trabalhando com Date
        // new Date() Inicializa com a data e hora atual do computador.
        // new Date (ano, mes, dia, hora, minuto, segundo, milisegundo) Lembrando que o mês começa em 0 para Janeiro.

        /*
        Refs.

        - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date
        - https://www.w3schools.com/jsref/jsref_obj_date.asp

        1. Date é um tipo específico do JS
        2. Possuem métodos próprios para manipulação get e set.
        3. São melhores quando se utilizados com bibliotecas (moment.js e fs-date)

        ## Como se declara uma variável Date no JS

        ```javascript
        new Date() // inicializa com a data e hora atual do computador.
        new Date(year, month, day, hours, minutes, seconds, milliseconds) // inicializa com valores pré-definidos.
        new Date(dateString) // inicializa a partir de uma string.
        ```

        ## Principais métodos

        - `getDay()` e `setDay()` - Retorna / define o dia da semana (0-6).
        - `getDate()` e `setDate()` - Retorna / define o dia do mês (1-31).
        - `getMonth()` e `setMonth()` - Retorna / define o mês (0-11).
        - `getFullYear()` e `setFullYear()` - Retorna / define o ano.
        - `getHours()` e `setHours()` - Retorna / define a hora (0-23).
        - `getMinutes()` e `setMinutes()` - Retorna / define os minutos (0-59).
        - `getSeconds()` e `setSeconds()` - Retorna / define os segundos (0-59).
        - `parse()` - Recupera uma data a partir de uma string.
        - `toString()` - Retorna uma data como string.
        - `toISOString()` - Retorna uma data como string no padrão ISO.
        - `toTimeString()` - Retorna a hora apenas.
        */

        // Falsy and Truthy
        /*
        Refs.:

        - https://developer.mozilla.org/en-US/docs/Glossary/Falsy
        - https://developer.mozilla.org/en-US/docs/Glossary/Truthy

        O valor é considerado falso quando:
        false
        0
        -0
        0n
        ""
        ''
        ``
        null
        undefined
        NaA

        O valor é considerado verdadeiro quando:
        true
        {}
        []
        1
        1.2
        "0"
        "false"
        -1
        -1.2
        Infinity
        -Infinity
        */

        // Trabalhando com Ternário IF
        var valor
        var texto = "A"
        valor = texto == "A" ? 10 : 20 // Estrutura padrão do IF Ternário
        console.log(valor) // 10

        // Trabalhando com Switch Case
        var switchcase = 4
        switch (switchcase){
            case 1:
                console.log("Primeira condição atingida.")
                break
            case 2:
                console.log("Segunda condição atingida.")
                break
            case 3:
            case 4:
                console.log("Terceira ou quarta condição atingida.")
                break
            default:
                console.log("Default atingido.")
                break
        }

        // Trabalhando com o Try Catch
        try {
            // Executa algum comando
            // Exemplo consulta de API, Banco de Dados, arquivos ...
            // throw dispara o try catch
        } catch (error) {
            // Erro
            // console.error(error)
        } finally {
            // Sempre executa ao final (opicional)
        }

        // Trabalhando com o For
        for (let i = 0; i < 3; i++){
            console.log(i)
        }

        // Trabalhando com o For Of
        const nomes = ["Victor", "Felipe", "Maria", "José"]
        for (const nome of nomes){
            console.log(nome)
        }

        // Trabalhando com o For In
        const person = {
            name: "Victor",
            age: 28,
        }
        for (const propriedades in person){
            console.log(`${propriedades} - ${person[propriedades]}`)
        }

        // Funções
        function sayHello(name, lastname) {
            console.log(`Olá ${name} ${lastname}, Bem-vindo(a) à Dev Samurai!`)
        }
        sayHello("Victor", "Magalhães")
        sayHello("Felipe", "Fontoura")

        // Funções return
        function sum(n1, n2) {
            return n1 + n2
        }

        const r = sum(1, 1)
        console.log(r)

        // Objeto arguments
        function somar() {
            // Arguments
            let res = 0
            for (const n of arguments) {
                res += n
            }
            return res
        }
        console.log(somar(1, 1, 3, 10, 4, 1, 3, 4))

        // Valor vs Referência
        // Variáveis do tipo normal passam apenas o valor
        // Variáveis do tipo objeto passam a referência
        const n = {
            value: 10
        }
        function multObj(obj) {
            obj.value *= obj.value
            return obj
        }
        console.log(multObj(n))
        console.log(n)

        // Function scoped
        // Se atribuir a função a uma variável ela vai ficar disponível depois
        const mult = function (n) {
            n *= n
            return n
        }
        console.log(mult(10))

        // Arrow functions
        const multiplicar = (n) => (n *= n)
        console.log(multiplicar(8))

        // Callbacks
        // Callbacks é uma função chamar outra função
        // São muito utilizados nas funções map, filter, reduce
        const valores = [1, 2, 3, 4, 10]
        
        const func = (n) => n * n

        function multipli (values, func) {
            for (let i = 0; i < values.length; i++) {
                values[i] = func(values[i])
            }
            return values
        }

        console.log(multipli(valores, func))

        // Type casting e Type coersion
        // Type casting = Conversão pelo usuário
        // Type coersion = Conversão 'coercitiva' pela VM
        console.log("2" + 2)
        console.log(Number("2") + 2)

        // Number <-> String
        console.log(Number("4")) // Converte para número
        console.log(String(6)) // Converte para string

        // Number e String <-> Boolean
        console.log(Boolean("")) // Converte para boolean
        console.log(Boolean("abc"))
        console.log(Boolean(0))
        console.log(Boolean(1))

        console.log(Number(false)) // Converteu para 0 
        console.log(Number(true)) // Converteu para 1

        console.log(String(false)) // Converteu para string
        console.log(String(true)) // Converteu para string

        // String <-> Date
        console.log(new Date("2023/04/22 12:00"))
        console.log(new Date().toString())
        console.log(new Date().toISOString())

        // String <-> Array
        let myname = "Victor"

        console.log(myname[2])

        for (const v of name) {
            console.log(v)
        }

        let muitosvalores = [1, 2, 3, 4, 5, 10, 20]
        console.log(muitosvalores.join(" ")) // Transforma um array em string

        let nomecompleto = "Victor Magalhães"
        console.log(nomecompleto.split(" ")) // Divide uma string em array

        // Casas decimais - Formatação e arredondamento
        let variavelvalor = 1234.70

        console.log(variavelvalor.toFixed(2)) // Fixa e arredonda para cima

        console.log(Math.ceil(variavelvalor)) // Arredonda para cima indiferente do valor decimal
        
        console.log(Math.floor(variavelvalor)) // Arredonda para baixo indiferente do valor decimal

        console.log(Math.round(variavelvalor)) // Arredonda para baixo ou para cima dependendo do decimal

        console.log(
            new Intl.NumberFormat("pt-BR", {
                style: "currency",
                currency: "BRL",
            }).format(variavelvalor)
        ) // Faz uma formatação para exibição

        // Contando dígitos
        let contnome = "Victor"
        let contnum = 12345

        console.log(contnome.length)
        console.log(String(contnum).length)

        // Separando e juntando strings
        let frase = "Eu sou um cara legal!"
        
        console.log(frase)
        console.log(frase.split(" ").join(""))
        
        // Maíusculas e minúsculas
        let fra = "Viver é maravilhoso!"
        
        console.log(fra)
        console.log(fra.toLocaleLowerCase()) // Tudo em minúsculo
        console.log(fra.toLocaleUpperCase()) // Tudo em maíusculo

        // Localizando strings
        let frasestring = "Eu sou um cara legal!"

        console.log(frasestring)
        console.log(frasestring.toLocaleLowerCase().includes("eu")) // True or false olhando o caracter passado
        
        // Substituindo strings
        let frasesubs = "Paulo era um cara legal!"

        console.log(frasesubs)
        console.log(frasesubs.replace("Paulo", "Jonny"))

        // Convertendo JSON
        // JSON - JavaScript Object Notation
        // JSON.stringfy()
        // JSON.parse()
        const people = [
            {
                id: 1,
                name: "Victor",
                lastName: "Magalhães",
                bornDate: new Date(1995, 8, 3),
                adress: {
                    city: "Coronel Fabriciano",
                },
            },
            {
                id: 2,
                name: "Felipe",
                lastName: "Fontoura",
                bornDate: new Date(1982, 1, 18),
                adress: {
                    city: "São José dos Campos",
                },
            },
        ]
        
        console.log(people)
        console.log(JSON.stringify(people)) // Conversão de obj -> string / JSON

        const stringjson = '[{"id":1,"name":"Victor","lastName":"Magalhães","bornDate":"1995-09-03T03:00:00.000Z","adress":{"city":"Coronel Fabriciano"}},{"id":2,"name":"Felipe","lastName":"Fontoura","bornDate":"1982-02-18T03:00:00.000Z","adress":{"city":"São José dos Campos"}}]'
        console.log(stringjson)
        console.log(JSON.parse(stringjson)) // Conversão de string / JSON -> obj

        // Métodos básicos de manipulação de Array
        let metodoarray = ["Victor", "Felipe", "André", "Paulo", "Jonny"]

        // Retornar elementos especificos de um array
        console.log(metodoarray[2])
        console.log(metodoarray[metodoarray.length - 1])

        // Retornar "fatias" de um array
        console.log(metodoarray.slice(2))
        console.log(metodoarray.slice(1, 3))

        // Adicionar novos elementos no array (início ou fim)
        metodoarray.push("Ana") // Adiciona no final
        console.log(metodoarray)
        metodoarray.unshift("Maria") // Adicona no início
        console.log(metodoarray)

        // Remover elementos no array (início ou fim)
        metodoarray.pop() // Remove do fim
        console.log(metodoarray)
        metodoarray.shift() // Remove do início
        console.log(metodoarray)

        // Remover "fatias" de um array
        metodoarray.splice(1, 2)
        console.log(metodoarray)

        // Localizar elementos
        let index = metodoarray.indexOf("Jonny")
        metodoarray.splice(index, 1)
        console.log(metodoarray)

        // Concatenação de Array
        let set1 = [1, 2, 3, 4, 5]
        let set2 = [6, 7, 8, 9, 10]
        let set3 = [11, 12]

        console.log(set1.concat(set2).concat(set3))

        // Desestruturação de Array
        let set = [1, 2, 3, 4, 5]

        let [n1, n2] = set

        console.log("n1", n1)
        console.log("n2", n2)

        // Filter Array
        // Filtra os arrays por parametros passados
        const numfilter = [10, 18, 1, 15]
        
        let resfilter = numfilter.filter((n) => n > 10)

        console.log(resfilter)

        const pessoafilter = [
            { name: "Victor", gender: "M", age: 28},
            { name: "Amanda", gender: "F", age: 40},
            { name: "Felipe", gender: "M", age: 14},
        ]

        let respessoa = pessoafilter.filter((p) => (p.age >= 18 && p.gender === "M"))
        console.log(respessoa)

        // Map Array
        // Trabalha o array de acordo com os parametros passados
        const nummap = [1, 2, 3, 4, 5]

        const double = nummap.map((n) => n * 2)

        console.log(double)

        const pessoamap = [
            { name: "Victor", gender: "M", age: 28},
            { name: "aManda", gender: "F", age: 40},
            { name: "felipE", gender: "M", age: 14},
        ]
        
        const newname = pessoamap.map((p) => p.name.toUpperCase())
        console.log(newname)

        // Reduce Array
        // Ref. https://developer.mozilla.org/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce

        //   array.reduce(callback[, initialValue])
        //
        //   callback - Função que é executada em cada valor no array, recebe quatro argumentos:
        //   acumulator - O valor retornado na última invocação do *callback*, ou o argumento Valor Inicial, se fornecido.
        //   currentValue - O elemento atual que está sendo processado no array.
        //   indice - O índice do elemento atual que está sendo processado no array.
        //   array - O array ao qual a função reduce foi chamada.
        //   initialValue - Opcional. Objeto a ser usado como o primeiro argumento da primeira chamada da função callback.

        let valoresreduce = [1.5, 2, 4, 10]

        // function callback(acumulator, currentValue, index, array) {
        //     console.log(`acumulator`, acumulator)
        //     console.log(`currentValue`, currentValue)
        //     console.log(`index`, index)
        //     console.log(`array`, array)
        //     console.log("---")

        //     // return acumulator
        // }

        // valoresreduce.reduce(callback)

        // Agregação
        let sumreduce = valoresreduce.reduce((total, item) => total + item, 0)
        console.log("sum", sumreduce)

        let avgreal = (valoresreduce.reduce((agre, item) => (agre + item), 0)) / valoresreduce.length
        console.log('avgreal', avgreal)

        // let avg = valoresreduce.reduce(
        //   (total, item, index) => (total + item) / (index + 1),
        //   0
        // )
        // console.log("avg", avg)

        // Map
        let doublereduce = valoresreduce.reduce((total, item) => total.concat(item * 2), [])
        console.log("double", doublereduce)

        // Filter
        let newreduce = valoresreduce.reduce((total, item) => {
          if (item > 2) {
            total.push(item)
          }
          return total
        }, [])
        console.log("newValues", newreduce)

        // Até o item 4 - 3

    </script>
</html>
